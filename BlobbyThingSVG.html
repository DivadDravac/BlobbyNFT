<!DOCTYPE html>
<html>
  <head>
    <title>Blobby #000000</title>
  </head>
  <body style="background-color: black;">
    <div style=" text-align: center;">

      <canvas id="canvas" width="600" height="600" >

      </canvas>
        
      <script src="LZWEncoder.js"></script>
      <script src="NeuQuant.js"></script>
      <script src="GIFEncoder.js"></script>

      <script src="GenomesBlobs.js"></script>
      <script src="Genome.js"></script>
      <script src="BlobbyGen.js"></script>
      
      <script language="JavaScript">
        //recup param page
        var parameters = location.search.substring(1).split("A");

        function readTextFile(file)
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                        var allText = rawFile.responseText;

                    }
                }
            }
            rawFile.send(null);
            return allText;
        }

        var img = new Image();
        //var serialized = new XMLSerializer().serializeToString();
        console.log(readTextFile("BlobbyThing.svg"));
        var svg = new Blob([readTextFile("BlobbyThing.svg")], {type: "image/svg+xml"});
        var url = URL.createObjectURL(svg);

        img.onload = function() {
          var canvas = document.getElementById("canvas");
          var ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0,0);
          encoder.addFrame(ctx);
          URL.revokeObjectURL(url);
        };

        img.src = url;

        var BlobMaker = new Worker("BlobbyGen.js");

      </script>

    </div>
  </body>
</html>

