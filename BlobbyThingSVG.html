<!DOCTYPE html>
<html>
  <head>
    <title>Blobby #000000</title>
  </head>
  <body style="background-color: black;">
    <div style=" text-align: center;">

      <canvas id="canvas" width="600" height="600" >

      </canvas>
        
      <script language="JavaScript">
        //recup param page
        function readTextFile(file)
        {
            var rawFile = new XMLHttpRequest();
            var allText = "";
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                      allText = rawFile.responseText;
                    }
                }
            }
            rawFile.send(null);
            return allText;
        }

        var img = new Image();
        var svg = new Blob([readTextFile("BlobbyThing.svg")], {type: "image/svg+xml"});
        var url = URL.createObjectURL(svg);

        img.onload = function() {
          var canvas = document.getElementById("canvas");
          var ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0,0);
          //encoder.addFrame(ctx);
          //URL.revokeObjectURL(url);

          console.log(svg.text());
        };

        img.src = url;

        var parameters = location.search.substring(1).split("A");

        var BlobW = new Worker("BlobWorker.js");

        BlobW.postMessage({aTopic: 'Init'});
        //aBuf: arrBuf },);

      </script>

    </div>
  </body>
</html>

